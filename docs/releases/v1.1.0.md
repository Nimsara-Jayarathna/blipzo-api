# Blipzo API v1.1.0 Release Notes

## Overview
- **Version:** v1.1.0
- **Release Date:** 2026-01-25
- **Summary:** v1.1.0 adds a new `/api/v1.1` surface with advanced auth flows, multi-currency support, and standardized responses, while keeping `/api/v1` backward compatible. It also introduces transactional email support, token cleanup, security hardening, and deployment tooling (Docker + CI).

## Features
- **v1.1 API namespace** that inherits all v1 endpoints and adds new capabilities under `/api/v1.1`.
- **Advanced authentication flows** (OTP registration, password reset/change, and multi-step email change).
  - New endpoints include:
    - `POST /api/v1.1/auth/register/init`
    - `POST /api/v1.1/auth/register/verify`
    - `POST /api/v1.1/auth/register/complete`
    - `POST /api/v1.1/auth/password/forgot`
    - `POST /api/v1.1/auth/password/reset`
    - `POST /api/v1.1/auth/password/change`
    - `POST /api/v1.1/auth/email/change/init`
    - `POST /api/v1.1/auth/email/change/verify-current`
    - `POST /api/v1.1/auth/email/change/request-new`
    - `POST /api/v1.1/auth/email/change/confirm`
    - `PUT  /api/v1.1/auth/me`
- **Currency management** with a new `Currency` model, currency seeding, and user preference endpoints:
  - `GET /api/v1.1/currencies`
  - `PUT /api/v1.1/users/currency`
- **Transactional email support** for OTP, reset, welcome, and security notifications (Brevo integration).
- **Token lifecycle management** via a dedicated `Token` model and hourly cleanup job.

## Bug Fixes
- No specific user-visible bug fixes were called out beyond the improvements below.

## Improvements / Refactors
- **Service layer extraction** for v1 and v1.1 (business logic moved into `src/api/*/services`).
- **Standardized v1.1 responses** with success envelopes and structured error codes (`ERROR_CODES`, `HTTP_STATUS`).
- **Security hardening**: `helmet`, `express-mongo-sanitize`, `hpp`, and global/auth/email rate limiting.
- **Operational tooling**: Dockerfile, docker-compose, GitHub Actions + GitLab CI configs, and ESLint setup.
- **Documentation expansion**: API overview and versioned API docs (`docs/api/`).

## Known Limitations
- v1 endpoints continue to return legacy response shapes; only `/api/v1.1` is standardized.
- Email-driven flows require Brevo credentials; without them, OTP and reset emails cannot be delivered.
- Rate-limit defaults may need tuning for higher traffic environments.
- Transaction deletion requires a valid IANA timezone header (e.g., `X-Timezone`).

## Setup / Run Instructions
### Prerequisites
- Node.js 20+
- MongoDB

### Installation
1. Clone the repository.
2. Install dependencies:
   ```bash
   npm ci
   ```
3. Configure environment variables in `.env` (refer to `README.md` for template).

## Branching & Versioning Strategy
- **main**: Production-ready code.
- **dev**: Active development.
- **Versioning**: Semantic Versioning (MAJOR.MINOR.PATCH).

## Notes
- New collections: `currencies` and `tokens`. Currency seeding runs at startup and assigns a default currency to existing users when missing.
- Email flows use Brevo settings: `BREVO_API_KEY`, `BREVO_SENDER_EMAIL`, and optional `BREVO_SENDER_NAME`.
- Password reset links use `CLIENT_URL` (web) or `MB_APP_URI_SCHEME` (mobile deep link).
- Rate limit tuning via `GLOBAL_LIMIT_*`, `AUTH_LIMIT_*`, and `EMAIL_LIMIT_*` environment variables.
